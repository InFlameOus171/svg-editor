{"version":3,"file":"Pen.js","sourceRoot":"","sources":["../../../src/util/Pen.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ShapeType } from '../types/shapes.types';\r\nimport type { SVGParamsBase } from '../types/types';\r\nimport { typeOfShape } from './helper/typeguards';\r\nimport { Ellipse } from './Shapes/Ellipse';\r\nimport { Freehand } from './Shapes/Freehand';\r\nimport { Line } from './Shapes/Line';\r\nimport { Path } from './Shapes/Path';\r\nimport { Rectangle } from './Shapes/Rectangle';\r\nimport { TextShape } from './Shapes/Text';\r\n\r\nconst Pen = {\r\n  generatePen: (context?: CanvasRenderingContext2D | null) => {\r\n    return {\r\n      draw: (shape: ShapeType, svgParams?: Partial<SVGParamsBase>) => {\r\n        Pen.draw(shape, svgParams, context);\r\n      },\r\n    };\r\n  },\r\n\r\n  draw: (\r\n    shape: ShapeType,\r\n    svgParams?: Partial<SVGParamsBase>,\r\n    context?: CanvasRenderingContext2D | null\r\n  ) => {\r\n    const shapeType = typeOfShape(shape);\r\n    switch (shapeType) {\r\n      case 'Ellipse':\r\n        Pen.drawEllipse(shape as Ellipse, context, svgParams);\r\n        break;\r\n      case 'Rectangle':\r\n        Pen.drawRectangle(shape as Rectangle, context, svgParams);\r\n        break;\r\n      case 'Line':\r\n        Pen.drawLine(shape as Line, context, svgParams);\r\n        break;\r\n      case 'Freehand':\r\n        Pen.drawFreehand(shape as Freehand, context, svgParams);\r\n        break;\r\n      case 'Path':\r\n        Pen.drawPath(shape as Path, context, svgParams);\r\n        break;\r\n      case 'TextShape':\r\n        Pen.drawText(shape as TextShape, context, svgParams);\r\n        break;\r\n    }\r\n  },\r\n\r\n  setStyles: (\r\n    pathConstructor: Path2D,\r\n    context: CanvasRenderingContext2D,\r\n    svgParams: Partial<SVGParamsBase>\r\n  ) => {\r\n    const { fill, stroke, strokeWidth, transformMatrix } = svgParams;\r\n    if (fill) {\r\n      context.fillStyle = fill;\r\n    }\r\n    if (stroke) {\r\n      context.strokeStyle = stroke;\r\n    }\r\n    if (strokeWidth) {\r\n      context.lineWidth = parseFloat(strokeWidth);\r\n    }\r\n    if (transformMatrix) {\r\n      pathConstructor.addPath(new Path2D(), transformMatrix);\r\n    }\r\n    context.lineWidth = strokeWidth ? parseFloat(strokeWidth) : 1;\r\n    if (stroke && stroke !== 'null') {\r\n      context.strokeStyle = stroke;\r\n    }\r\n    if (fill && fill !== 'none') {\r\n      context.fillStyle = fill;\r\n      context.fill(pathConstructor);\r\n    }\r\n    if (stroke || strokeWidth) {\r\n      context.stroke(pathConstructor);\r\n    }\r\n    if (!stroke && !fill && !strokeWidth) {\r\n      context.stroke(pathConstructor);\r\n      context.fill(pathConstructor);\r\n    }\r\n  },\r\n\r\n  applyStyles: (\r\n    pathConstructor: Path2D,\r\n    styles: SVGParamsBase,\r\n    context: CanvasRenderingContext2D\r\n  ) => {\r\n    const { fill, stroke, strokeWidth, transformMatrix, lineCap, lineDash } =\r\n      styles;\r\n    if (transformMatrix) {\r\n      const newPath = new Path2D();\r\n      newPath.addPath(pathConstructor, transformMatrix);\r\n      pathConstructor = newPath;\r\n    }\r\n    if (lineDash) {\r\n      context.setLineDash(lineDash);\r\n    }\r\n    if (lineCap) {\r\n      context.lineCap = lineCap;\r\n    }\r\n    if (!stroke && !fill && !strokeWidth) {\r\n      context.stroke(pathConstructor);\r\n      context.fill(pathConstructor);\r\n      return pathConstructor;\r\n    }\r\n    if (strokeWidth) {\r\n      context.lineWidth = parseFloat(strokeWidth);\r\n    }\r\n    if (fill && fill !== 'none') {\r\n      context.fillStyle = fill;\r\n    }\r\n    if (stroke && stroke !== 'null') {\r\n      context.strokeStyle = stroke;\r\n    }\r\n    return pathConstructor;\r\n  },\r\n\r\n  drawPath: (\r\n    path: Path,\r\n    context?: CanvasRenderingContext2D | null,\r\n    svgParams?: Partial<SVGParamsBase>\r\n  ) => {\r\n    let pathConstructor = new Path2D(path.toString());\r\n    if (context) {\r\n      const params = {\r\n        ...path.getSvgParams(),\r\n        ...svgParams,\r\n      };\r\n      pathConstructor = Pen.applyStyles(pathConstructor, params, context);\r\n      params.stroke && context.stroke(pathConstructor);\r\n      params.fill && context.fill(pathConstructor);\r\n      context.closePath();\r\n    }\r\n  },\r\n\r\n  drawText: (\r\n    textShape: TextShape,\r\n    context?: CanvasRenderingContext2D | null,\r\n    svgParams?: SVGParamsBase\r\n  ) => {\r\n    const { position } = textShape.toPathParams();\r\n    const params = svgParams ?? textShape.getSvgParams();\r\n    const { text, fontSize, fontFamily, ...rest } = params;\r\n\r\n    if (context && text) {\r\n      if (rest.stroke) {\r\n        context.strokeStyle = rest.stroke;\r\n      }\r\n      if (params.lineDash) {\r\n        context.setLineDash(params.lineDash);\r\n      }\r\n      if (params.lineCap) {\r\n        context.lineCap = params.lineCap;\r\n      }\r\n      if (params.strokeWidth) {\r\n        context.lineWidth = parseInt(params.strokeWidth);\r\n      }\r\n      context.fillStyle = rest.fill ?? '#000000';\r\n      context.font = (fontSize?.toString() ?? '12').concat(\r\n        'px ',\r\n        (fontFamily ?? 'Arial').toLowerCase()\r\n      );\r\n      context.fillText(text, ...position);\r\n      context.strokeText(text, ...position);\r\n      context?.closePath();\r\n    }\r\n  },\r\n\r\n  drawFreehand: (\r\n    freehand: Freehand,\r\n    context?: CanvasRenderingContext2D | null,\r\n    svgParams?: Partial<SVGParamsBase>\r\n  ) => {\r\n    let pathConstructor = new Path2D();\r\n    const points = freehand.getPoints();\r\n    const start = points[0];\r\n    const rest = points.slice(1);\r\n    const params = svgParams ?? freehand.getSvgParams();\r\n    if (context) {\r\n      Pen.applyStyles(pathConstructor, params, context);\r\n      pathConstructor.moveTo(...start);\r\n      rest.forEach(point => {\r\n        pathConstructor.lineTo(...point);\r\n      });\r\n      context?.stroke(pathConstructor);\r\n      context?.closePath();\r\n    }\r\n  },\r\n\r\n  drawLine: (\r\n    line: Line,\r\n    context?: CanvasRenderingContext2D | null,\r\n    svgParams?: Partial<SVGParamsBase>\r\n  ) => {\r\n    let pathConstructor = new Path2D();\r\n    if (context) {\r\n      const params = svgParams ?? line.getSvgParams();\r\n      Pen.applyStyles(pathConstructor, params, context);\r\n      const { fill, stroke } = params;\r\n      pathConstructor.moveTo(...line.points[0]);\r\n      pathConstructor.lineTo(...line.points[1]);\r\n      stroke && context.stroke(pathConstructor);\r\n      fill && context.fill(pathConstructor);\r\n      context.closePath();\r\n    }\r\n  },\r\n\r\n  drawRectangle: (\r\n    rectangle: Rectangle,\r\n    context?: CanvasRenderingContext2D | null,\r\n    svgParams?: Partial<SVGParamsBase>\r\n  ) => {\r\n    let path = new Path2D();\r\n    const values = Object.values(rectangle.toPathParams()) as [\r\n      number,\r\n      number,\r\n      number,\r\n      number\r\n    ];\r\n    if (context) {\r\n      const params = svgParams ?? rectangle.getSvgParams();\r\n      path = Pen.applyStyles(path, params, context);\r\n      const { fill, stroke } = params;\r\n      path.rect(...values);\r\n      stroke && context.stroke(path);\r\n      fill && context.fill(path);\r\n      context.closePath();\r\n    }\r\n  },\r\n\r\n  drawEllipse: (\r\n    ellipse: Ellipse,\r\n    context?: CanvasRenderingContext2D | null,\r\n    svgParams?: Partial<SVGParamsBase>\r\n  ) => {\r\n    const path = new Path2D();\r\n    const values = Object.values(ellipse.toPathParams()) as [\r\n      number,\r\n      number,\r\n      number,\r\n      number\r\n    ];\r\n    if (context) {\r\n      const params = svgParams ?? ellipse.getSvgParams();\r\n      Pen.applyStyles(path, params, context);\r\n      const { fill, stroke } = params;\r\n\r\n      path.ellipse(...values, 0, 0, 2 * Math.PI);\r\n      stroke && context.stroke(path);\r\n      fill && context.fill(path);\r\n      context?.closePath;\r\n    }\r\n  },\r\n\r\n  clearCanvas: (\r\n    canvas: HTMLCanvasElement,\r\n    canvasContext?: CanvasRenderingContext2D | null\r\n  ) => {\r\n    if (canvas) {\r\n      let context: CanvasRenderingContext2D | null | undefined = canvasContext;\r\n      if (!context) {\r\n        context = canvas.getContext('2d');\r\n      }\r\n      context && context.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  },\r\n};\r\nObject.freeze(Pen);\r\nexport { Pen };\r\n"]}