{"version":3,"file":"shapes.js","sourceRoot":"","sources":["../../../../src/util/helper/shapes.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ShapeType } from '../../types/shapes.types';\r\nimport {\r\n  Coordinates,\r\n  EllipseSVGParams,\r\n  FreehandSVGParams,\r\n  LineSVGParams,\r\n  PathSVGParams,\r\n  RectSVGParams,\r\n  SVGDrawPath,\r\n  SVGParamsBase,\r\n} from '../../types/types';\r\nimport { Ellipse } from '../Shapes/Ellipse';\r\nimport { Freehand } from '../Shapes/Freehand';\r\nimport { Line } from '../Shapes/Line';\r\nimport { Path } from '../Shapes/Path';\r\nimport { Rectangle } from '../Shapes/Rectangle';\r\nimport { TextShape } from '../Shapes/Text';\r\nimport { acceptedTags } from './constants';\r\nimport { getMinMaxValuesOfCoordinates } from './coordinates';\r\nimport { pathCommandsRegExp } from './regularExpressions';\r\nimport { typeOfShape } from './typeguards';\r\nimport {\r\n  hexToRGBA,\r\n  normalizeColorCode,\r\n  pathCommandValues,\r\n  singleDirectionCommands,\r\n} from './util';\r\n\r\nexport const createRect = (\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number\r\n) => {\r\n  const path = new Path2D();\r\n  path.rect(x, y, height, width);\r\n  return path;\r\n};\r\n\r\nexport const setSVGStyleParams = (\r\n  svgShape: Element,\r\n  lineDash?: number[],\r\n  lineCap?: string,\r\n  fill?: string,\r\n  stroke?: string,\r\n  strokeWidth?: string,\r\n  transformMatrix?: DOMMatrix\r\n) => {\r\n  const { a, b, c, d, e, f } = transformMatrix || {};\r\n  stroke && svgShape.setAttribute('stroke', stroke);\r\n  strokeWidth && svgShape.setAttribute('stroke-width', strokeWidth);\r\n  fill && svgShape.setAttribute('fill', fill);\r\n  lineDash && svgShape.setAttribute('stroke-dasharray', lineDash.join(' '));\r\n  lineCap && svgShape.setAttribute('stroke-linecap', lineCap);\r\n  transformMatrix &&\r\n    svgShape.setAttribute(\r\n      'transform',\r\n      `matrix(${[a, b, c, d, e, f].join(',')})`\r\n    );\r\n};\r\n\r\nexport const setRectSVGParams = (\r\n  svgShape: Element,\r\n  rectParams: RectSVGParams\r\n) => {\r\n  const { x, y, width, height, fill, stroke, strokeWidth, lineDash, lineCap } =\r\n    rectParams;\r\n  svgShape.setAttribute('x', x);\r\n  svgShape.setAttribute('y', y);\r\n  svgShape.setAttribute('width', width);\r\n  svgShape.setAttribute('height', height);\r\n  setSVGStyleParams(svgShape, lineDash, lineCap, fill, stroke, strokeWidth);\r\n};\r\n\r\nexport const setEllipseSVGParams = (\r\n  svgShape: Element,\r\n  ellipseParams: EllipseSVGParams\r\n) => {\r\n  const { cx, cy, rx, ry, fill, stroke, strokeWidth, lineDash, lineCap } =\r\n    ellipseParams;\r\n  svgShape.setAttribute('cx', cx);\r\n  svgShape.setAttribute('cy', cy);\r\n  svgShape.setAttribute('rx', rx);\r\n  svgShape.setAttribute('ry', ry);\r\n  setSVGStyleParams(svgShape, lineDash, lineCap, fill, stroke, strokeWidth);\r\n};\r\n\r\nexport const setCircleSVGParams = (\r\n  svgShape: Element,\r\n  circleParams: EllipseSVGParams\r\n) => {\r\n  const { cx, cy, rx, fill, stroke, strokeWidth, lineDash, lineCap } =\r\n    circleParams;\r\n  svgShape.setAttribute('cx', cx);\r\n  svgShape.setAttribute('cy', cy);\r\n  svgShape.setAttribute('r', rx);\r\n  setSVGStyleParams(svgShape, lineDash, lineCap, fill, stroke, strokeWidth);\r\n};\r\n\r\nexport const setLineSVGParams = (\r\n  svgShape: Element,\r\n  lineParams: LineSVGParams\r\n) => {\r\n  const { x1, y1, x2, y2, stroke, strokeWidth, lineDash, lineCap } = lineParams;\r\n  svgShape.setAttribute('x1', x1);\r\n  svgShape.setAttribute('y1', y1);\r\n  svgShape.setAttribute('x2', x2);\r\n  svgShape.setAttribute('y2', y2);\r\n  setSVGStyleParams(\r\n    svgShape,\r\n    lineDash,\r\n    lineCap,\r\n    undefined,\r\n    stroke,\r\n    strokeWidth\r\n  );\r\n};\r\n\r\nexport const setFreehandSVGParams = (\r\n  svgShape: Element,\r\n  freehandParams: FreehandSVGParams\r\n) => {\r\n  const { points, stroke, strokeWidth, lineDash, lineCap } = freehandParams;\r\n  svgShape.setAttribute('points', points);\r\n  setSVGStyleParams(\r\n    svgShape,\r\n    lineDash,\r\n    lineCap,\r\n    undefined,\r\n    stroke,\r\n    strokeWidth\r\n  );\r\n};\r\n\r\nexport const setPathSVGParams = (\r\n  svgShape: Element,\r\n  svgParams: PathSVGParams\r\n) => {\r\n  const { d, fill, stroke, strokeWidth, transformMatrix, lineDash, lineCap } =\r\n    svgParams;\r\n  svgShape.setAttribute('d', d);\r\n  setSVGStyleParams(\r\n    svgShape,\r\n    lineDash,\r\n    lineCap,\r\n    fill,\r\n    stroke,\r\n    strokeWidth,\r\n    transformMatrix\r\n  );\r\n};\r\n\r\nexport const setTextSVGParams = (svgShape: Element, textObject: TextShape) => {\r\n  const svgParams = textObject.toSVGTextParams();\r\n  const {\r\n    position,\r\n    lineDash,\r\n    lineCap,\r\n    fill,\r\n    stroke,\r\n    strokeWidth,\r\n    transformMatrix = new DOMMatrix([1, 0, 0, 1, 0, 0]),\r\n    fontFamily,\r\n    fontSize,\r\n    text,\r\n  } = svgParams;\r\n  if (text) {\r\n    svgShape.setAttribute('x', position[0].toString());\r\n    svgShape.setAttribute('y', position[1].toString());\r\n    svgShape.setAttribute(\r\n      'style',\r\n      'font-family:'.concat(\r\n        fontFamily ?? 'arial',\r\n        ';',\r\n        'font-size:',\r\n        (fontSize ?? 12).toString(),\r\n        'px'\r\n      )\r\n    );\r\n    svgShape.innerHTML = text;\r\n    setSVGStyleParams(\r\n      svgShape,\r\n      lineDash,\r\n      lineCap,\r\n      fill,\r\n      stroke,\r\n      strokeWidth,\r\n      transformMatrix\r\n    );\r\n  }\r\n};\r\n\r\nexport const appendAsSVGShapeGeneratorFunction =\r\n  (parent?: SVGGraphicsElement, svgNameSpace: string | null = null) =>\r\n  (shape: ShapeType) => {\r\n    switch (typeOfShape(shape)) {\r\n      case 'Rectangle': {\r\n        const rectangleObject = shape as Rectangle;\r\n        const rect = document.createElementNS(svgNameSpace, 'rect');\r\n        setRectSVGParams(rect, rectangleObject.toSvgRectParams());\r\n        parent?.appendChild(rect);\r\n        break;\r\n      }\r\n      case 'Ellipse': {\r\n        const ellipseObject = shape as Ellipse;\r\n        const isCircle = ellipseObject.radiusX === ellipseObject.radiusY;\r\n        if (isCircle) {\r\n          const circle = document.createElementNS(svgNameSpace, 'circle');\r\n          setCircleSVGParams(circle, ellipseObject.toSVGEllipseParams());\r\n          parent?.appendChild(circle);\r\n        } else {\r\n          const ellipse = document.createElementNS(svgNameSpace, 'ellipse');\r\n          setEllipseSVGParams(ellipse, ellipseObject.toSVGEllipseParams());\r\n          parent?.appendChild(ellipse);\r\n        }\r\n        break;\r\n      }\r\n      case 'Line': {\r\n        const lineObject = shape as Line;\r\n        const line = document.createElementNS(svgNameSpace, 'line');\r\n        setLineSVGParams(line, lineObject.toSVGLineParams());\r\n        parent?.appendChild(line);\r\n        break;\r\n      }\r\n      case 'Freehand': {\r\n        const freehandObject = shape as Freehand;\r\n        const freehand = document.createElementNS(svgNameSpace, 'polyline');\r\n        setFreehandSVGParams(freehand, freehandObject.toSVGFreehandParams());\r\n        parent?.appendChild(freehand);\r\n        break;\r\n      }\r\n      case 'Path': {\r\n        const pathObject = shape as Path;\r\n        const path = document.createElementNS(svgNameSpace, 'path');\r\n        setPathSVGParams(path, pathObject.toSVGPathParams());\r\n        parent?.append(path);\r\n        break;\r\n      }\r\n      case 'TextShape': {\r\n        const textObject = shape as TextShape;\r\n        const text = document.createElementNS(svgNameSpace, 'text');\r\n        setTextSVGParams(text, textObject);\r\n        parent?.append(text);\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\nexport const getPathCommands = (d: string) => {\r\n  const matches = Array.from(d.matchAll(pathCommandsRegExp)).map(\r\n    match => match[0]\r\n  );\r\n  const indices = matches.reduce((acc: number[], match, index) => {\r\n    if (pathCommandValues.includes(match)) {\r\n      return [...acc, index];\r\n    }\r\n    return acc;\r\n  }, []);\r\n  const segments = indices.reduce(\r\n    (acc: string[][], commandIndex, currentIndex) => {\r\n      if (currentIndex === indices.length - 1) {\r\n        return [...acc, matches.slice(commandIndex)];\r\n      }\r\n      return [...acc, matches.slice(commandIndex, indices[currentIndex + 1])];\r\n    },\r\n    []\r\n  );\r\n  return segments.map(convertMatchesToSVGDrawPath);\r\n};\r\n\r\nexport const convertMatchesToSVGDrawPath = (\r\n  match: RegExpMatchArray\r\n): SVGDrawPath => {\r\n  const command = match[0].trim();\r\n  const matchedCoordinates = match.slice(1);\r\n  if (singleDirectionCommands.includes(command)) {\r\n    return { command, points: matchedCoordinates.shift() };\r\n  }\r\n  const points = matchedCoordinates.reduce(\r\n    (acc: Coordinates[], point, index) => {\r\n      if (index % 2 === 0) {\r\n        return acc;\r\n      }\r\n      const coordinates: Coordinates = [\r\n        parseFloat(matchedCoordinates[index - 1]),\r\n        parseFloat(point),\r\n      ];\r\n      return [...acc, coordinates];\r\n    },\r\n    []\r\n  );\r\n  return { command, points };\r\n};\r\n\r\nconst getsvgParams = (element: SVGGraphicsElement): SVGParamsBase => {\r\n  const fillValues = normalizeColorCode(element.getAttribute('fill'));\r\n  const strokeValues = normalizeColorCode(element.getAttribute('stroke'));\r\n  const fill = hexToRGBA(fillValues.colorCode, fillValues.opacity);\r\n  const stroke = hexToRGBA(strokeValues.colorCode, strokeValues.opacity);\r\n  const strokeWidth = element.getAttribute('stroke-width') ?? '';\r\n  const transformMatrix = element.getCTM() ?? undefined;\r\n  const fontSize = element.style.fontSize;\r\n  const fontFamily = element.style.fontFamily;\r\n  const lineDash = element\r\n    .getAttribute('stroke-dasharray')\r\n    ?.split(' ')\r\n    .map(parseInt);\r\n  const lineCap = element.getAttribute('line-cap') as CanvasLineCap | undefined;\r\n  const text = element.tagName === 'text' ? element.innerHTML : '';\r\n  const bBox = element.getBBox();\r\n  return {\r\n    fill,\r\n    stroke,\r\n    strokeWidth,\r\n    text,\r\n    fontSize: fontSize ? parseInt(fontSize) : undefined,\r\n    fontFamily,\r\n    transformMatrix,\r\n    lineDash,\r\n    lineCap,\r\n    bBox,\r\n  };\r\n};\r\nconst elementWrapper = (element: SVGGraphicsElement) => {\r\n  return {\r\n    getFloatAttribute: (value: string) => {\r\n      const attr = element.getAttribute(value);\r\n      if (attr) {\r\n        return parseFloat(attr);\r\n      } else return -1;\r\n    },\r\n    getAttribute: element.getAttribute,\r\n  };\r\n};\r\n\r\nconst convertToShapeType = (element: SVGGraphicsElement): ShapeType => {\r\n  const svgParams = getsvgParams(element);\r\n  const wrappedElement = elementWrapper(element);\r\n  switch (element.tagName) {\r\n    case acceptedTags[0]: {\r\n      const cx = wrappedElement.getFloatAttribute('cx');\r\n      const cy = wrappedElement.getFloatAttribute('cy');\r\n      const r = wrappedElement.getFloatAttribute('r');\r\n      return new Ellipse([cx, cy], r, r, svgParams);\r\n    }\r\n    case acceptedTags[1]: {\r\n      {\r\n        const cx = wrappedElement.getFloatAttribute('cx');\r\n        const cy = wrappedElement.getFloatAttribute('cy');\r\n        const rx = wrappedElement.getFloatAttribute('rx');\r\n        const ry = wrappedElement.getFloatAttribute('ry');\r\n        return new Ellipse([cx, cy], rx, ry, svgParams);\r\n      }\r\n    }\r\n    case acceptedTags[2]: {\r\n      {\r\n        const x = wrappedElement.getFloatAttribute('x');\r\n        const y = wrappedElement.getFloatAttribute('y');\r\n        const width = wrappedElement.getFloatAttribute('width');\r\n        const height = wrappedElement.getFloatAttribute('height');\r\n        return new Rectangle([x, y], width, height, svgParams);\r\n      }\r\n    }\r\n    case acceptedTags[3]: {\r\n      {\r\n        const points = (wrappedElement.getAttribute('points') ?? '')\r\n          .split(' ')\r\n          .map((coordinate): [number, number] => {\r\n            const [x, y] = coordinate.split(',');\r\n            return [parseFloat(x), parseFloat(y)];\r\n          });\r\n        return new Freehand(points, svgParams);\r\n      }\r\n    }\r\n    case acceptedTags[4]: {\r\n      {\r\n        const x1 = wrappedElement.getFloatAttribute('x1');\r\n        const x2 = wrappedElement.getFloatAttribute('x2');\r\n        const y1 = wrappedElement.getFloatAttribute('y1');\r\n        const y2 = wrappedElement.getFloatAttribute('y2');\r\n        return new Line([x1, y1], [x2, y2], svgParams);\r\n      }\r\n    }\r\n    case acceptedTags[5]: {\r\n      const x = wrappedElement.getFloatAttribute('x');\r\n      const y = wrappedElement.getFloatAttribute('y');\r\n      const { width, height } = element.getBBox();\r\n      return new TextShape(width, height, [x, y], svgParams);\r\n    }\r\n    default: {\r\n      const pathDString = wrappedElement.getAttribute('d') ?? '';\r\n      const pathCommands = getPathCommands(pathDString);\r\n      return new Path(pathCommands, svgParams, true);\r\n    }\r\n  }\r\n};\r\n\r\nexport const convertSVGDocumentToShapes = (id: string): ShapeType[] => {\r\n  const svg = document.getElementById(id);\r\n  if (svg) {\r\n    return acceptedTags\r\n      .map(tag =>\r\n        (Array.from(svg.getElementsByTagName(tag)) as SVGGraphicsElement[]).map(\r\n          convertToShapeType\r\n        )\r\n      )\r\n      .flat();\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const generateSVGURLFromShapes = (shapes: ShapeType[]) => {\r\n  const xmlSerializer = new XMLSerializer();\r\n  const svgNS = 'http://www.w3.org/2000/svg';\r\n  const svg = document.createElementNS(svgNS, 'svg');\r\n  const g = document.createElementNS(svgNS, 'g');\r\n\r\n  const [allBoundaryCoordinates, allStrokeWidths] = shapes.reduce(\r\n    (acc: [Coordinates[], number[]], shape) => [\r\n      [...acc[0], ...shape.boundaries],\r\n      [...acc[1], parseInt(shape.getSvgParams().strokeWidth ?? '0')],\r\n    ],\r\n    [[], []]\r\n  );\r\n  const minMaxCoordinates = getMinMaxValuesOfCoordinates(\r\n    allBoundaryCoordinates\r\n  );\r\n\r\n  const maxStrokeWidth = Math.max(...allStrokeWidths);\r\n  const verticalOffset = minMaxCoordinates.yMin - maxStrokeWidth;\r\n  const horizontalOffset = minMaxCoordinates.xMin - maxStrokeWidth;\r\n  svg.setAttribute(\r\n    'height',\r\n    (minMaxCoordinates.yMax - verticalOffset).toString()\r\n  );\r\n  svg.setAttribute(\r\n    'width',\r\n    (minMaxCoordinates.xMax - horizontalOffset).toString()\r\n  );\r\n  g.setAttribute(\r\n    'transform',\r\n    'translate(' + -minMaxCoordinates.xMin + ',' + -minMaxCoordinates.yMin + ')'\r\n  );\r\n  svg.appendChild(g);\r\n\r\n  const appendAsSVGShape = appendAsSVGShapeGeneratorFunction(g, svgNS);\r\n  shapes.forEach(appendAsSVGShape);\r\n\r\n  let source = xmlSerializer.serializeToString(svg);\r\n  //add name spaces.\r\n  //https://stackoverflow.com/questions/23218174/how-do-i-save-export-an-svg-file-after-creating-an-svg-with-d3-js-ie-safari-an\r\n  if (!source.match(/^<svg[^>]+xmlns=\"http\\:\\/\\/www\\.w3\\.org\\/2000\\/svg\"/)) {\r\n    source = source.replace(/^<svg/, '<svg xmlns=\"http://www.w3.org/2000/svg\"');\r\n  }\r\n  if (!source.match(/^<svg[^>]+\"http\\:\\/\\/www\\.w3\\.org\\/1999\\/xlink\"/)) {\r\n    source = source.replace(\r\n      /^<svg/,\r\n      '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\r\n    );\r\n  }\r\n  source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\r\n  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(source);\r\n};\r\n"]}